<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	template="/resources/scaffold/admin-template.xhtml">

	<f:metadata>
		<f:viewParam name="resident" value='#{residentBean.residentId}' />
		<f:event type="preRenderView" listener='#{residentBean.retrieve}' />
	</f:metadata>
	<ui:define name="title">
		<h:outputText value="User Registration" />
	</ui:define>

	<ui:define name="top-div">
		<h:panelGroup id="titlePage" layout="block"
			class="page-breadcrumb bg-white">
			<h:panelGroup layout="block" class="row align-items-center mb-3">
				<h:panelGroup layout="block"
					class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
					<c:choose>
						<c:when test="#{!empty residentBean.residentId}">
							<h4 class="page-title">
								<h:outputText value="Update User Profile" />
							</h4>
						</c:when>
						<c:otherwise>
							<h4 class="page-title">
								<h:outputText value="User Registration" />
							</h4>
						</c:otherwise>
					</c:choose>
				</h:panelGroup>
			</h:panelGroup>
		</h:panelGroup>
	</ui:define>
	<ui:define name="main">
		<h:panelGroup layout="block" class="container-fluid">
			<!-- ============================================================== -->
			<!-- Start Page Content -->
			<!-- ============================================================== -->
			<!-- Row -->
			<h:panelGroup layout="block" class="row">
				<!-- Column -->
				<h:panelGroup id="header" layout="block"
					class="col-lg-4 col-xlg-3 col-md-12">
					<h:panelGroup layout="block" class="white-box">
						<h:panelGroup layout="block" class="user-bg">
							<h:graphicImage width="100%" alt="user"
								name="plugins/images/large/img1.jpg" />
							<h:panelGroup layout="block" class="overlay-box">
								<!-- <div class="overlay-box"> -->
								<h:panelGroup layout="block" class="user-content">
									<h:graphicImage
										value='#{resource["plugins/images/users/genu.jpg"]}'
										class="thumb-lg img-circle" alt="user image" />
								</h:panelGroup>
							</h:panelGroup>
						</h:panelGroup>
					</h:panelGroup>
				</h:panelGroup>
				<!-- Column -->
				<!-- Column -->
				<h:panelGroup layout="block" class="col-lg-8 col-xlg-9 col-md-12">
					<h:panelGroup layout="block" class="card">
						<h:panelGroup layout="block" class="card-body">
							<h:form class="form-horizontal form-material">
								<h:panelGroup id="firstnameField" class="form-group mb-4"
									layout="block">
									<h:outputLabel class="col-md-12 p-0" for="firstName"
										value="First Name" />
									<h:panelGroup id="firstnameBlock"
										class="col-md-12 border-bottom p-0" layout="block">
										<h:inputText id="firstName" pt:placeholder="First Name"
											required="true" class="form-control p-0 border-0"
											value="#{residentBean.resident.firstName}" />
										<h:message for="firstName" errorClass="invalid" />
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup id="lastnameField" class="form-group mb-4"
									layout="block">
									<h:outputLabel class="col-md-12 p-0" for="lastName"
										value="Last Name" />
									<h:panelGroup id="lastnameBlock"
										class="col-md-12 border-bottom p-0" layout="block">
										<h:inputText id="lastName" pt:placeholder="Last Name"
											required="true" class="form-control p-0 border-0"
											value="#{residentBean.resident.lastName}" />
										<h:message for="lastName" errorClass="invalid" />
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup id="birthdateField" class="form-group mb-4"
									layout="block">
									<h:outputLabel class="col-md-12 p-0" for="birthdate"
										value="Date of Birth" />
									<h:panelGroup id="birthdateBlock"
										class="col-md-12 border-bottom p-0" layout="block">
										<h:inputText type="date" id="birthdate"
											pt:placeholder="Date of Birth" required="true"
											class="form-control p-0 border-0"
											value="#{residentBean.resident.dateOfBirth}">
											<f:convertDateTime type="localDate" pattern="yyyy-MM-dd" />
										</h:inputText>
										<h:message for="birthdate" errorClass="invalid" />
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup id="phoneNumberField" class="form-group mb-4"
									layout="block">
									<h:outputLabel class="col-md-12 p-0" for="phoneNumber"
										value="Phone Number" />
									<h:panelGroup id="phoneNumberBlock"
										class="col-md-12 border-bottom p-0" layout="block">
										<h:inputText id="phoneNumber" pt:placeholder="Phone Number"
											required="true" class="form-control p-0 border-0"
											value="#{residentBean.resident.phoneNumber}" />
										<h:message for="phoneNumber" errorClass="invalid" />
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup id="emailField" class="form-group mb-4"
									layout="block">
									<h:outputLabel class="col-md-12 p-0" for="email" value="Email" />
									<h:panelGroup id="emailBlock"
										class="col-md-12 border-bottom p-0" layout="block">
										<h:inputText type="email" id="email"
											pt:placeholder="johnathan@admin.com" required="true"
											class="form-control p-0 border-0" name="example-email"
											value="#{residentBean.resident.email}" />
										<h:message for="email" errorClass="invalid" />
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup id="usernameField" class="form-group mb-4"
									layout="block">
									<h:outputLabel class="col-md-12 p-0" for="userName"
										value="User Name" />
									<h:panelGroup id="usernameBlock"
										class="col-md-12 border-bottom p-0" layout="block">
										<h:inputText id="userName" pt:placeholder="User Name"
											required="true" class="form-control p-0 border-0"
											value="#{residentBean.resident.userName}" />
										<h:message for="userName" errorClass="invalid" />
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup id="passwordField" class="form-group mb-4"
									layout="block" rendered="#{empty residentBean.residentId}">
									<h:outputLabel class="col-md-12 p-0" for="password"
										value="Password" />
									<h:panelGroup id="passwordBlock"
										class="col-md-12 border-bottom p-0" layout="block">
										<h:inputSecret id="password" pt:placeholder="Password"
											required="true" class="form-control p-0 border-0"
											value="#{residentBean.resident.password}" />
										<h:message for="password" errorClass="invalid" />
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup id="roleSelector" class="form-group mb-4"
									layout="block">
									<h:outputLabel class="col-md-12 p-0" for="role" value="Role" />
									<h:panelGroup id="roleField"
										class="col-md-12 border-bottom p-0" layout="block">
										<h:selectOneMenu id="role" pt:placeholder="Role"
											required="true"
											class="form-select shadow-none border-0 form-control-line"
											value="#{residentBean.resident.role}">
											<f:selectItem />
											<f:selectItem itemValue="USER" />
											<f:selectItem itemValue="ADMIN" />
										</h:selectOneMenu>
										<h:message for="role" errorClass="invalid" />
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup id="buttons" class="form-group mb-4"
									layout="block">
									<h:panelGroup id="buttonSuccess" class="col-sm-12"
										layout="block">
										<c:choose>
											<c:when test='#{!empty residentBean.residentId}'>
												<h:commandButton id="update" action="#{residentBean.update}"
													value="Update Profile" class="btn btn-success me-4">
												</h:commandButton>
												<h:link id="cancel" outcome="search?faces-redirect=true"
													value="Cancel" class="btn btn-success">
													<f:ajax execute="@form" render="@form :users:residents" />
												</h:link>
											</c:when>
											<c:otherwise>
												<h:commandButton id="add" action="#{residentBean.update}"
													value="Register User" class="btn btn-success me-4">
													<f:ajax execute="@form" render="@form :users:residents" />
												</h:commandButton>
												<h:link id="back" outcome="search?faces-redirect=true"
													value="Back to Users" class="btn btn-success">
													<f:ajax execute="@form" render="@form :users:residents" />
												</h:link>
											</c:otherwise>
										</c:choose>
									</h:panelGroup>
								</h:panelGroup>
							</h:form>
						</h:panelGroup>
					</h:panelGroup>
				</h:panelGroup>
			</h:panelGroup>
		</h:panelGroup>
	</ui:define>
</ui:composition>

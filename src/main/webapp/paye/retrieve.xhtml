<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	template="/resources/scaffold/template.xhtml">

	<ui:define name="title">PAYE Evaluation</ui:define>
	<ui:define name="home">
		<h:form class="form-input">
			<img class="mb-4" src='#{resource["bootstrap-logo.svg"]}'
				alt="Income and Income Calculator" width="72" height="57" />

			<h1 class="h4 mb-3 fw-normal">Please enter your gross salary</h1>

			<div class="form-floating mb-3">
				<h:inputText class="form-control" id="floatingInput"
					aria-label="Amount (to the nearest tzs)"
					pt:placeholder="99999999.99" pt:required="true"
					value="#{payeBean.paye.salary}" />
				<h:outputLabel for="floatingInput" class="text-muted"
					value="Gross Salary" />
			</div>

			<div class="checkbox mb-3">
				<h:selectBooleanCheckbox class="mx-2" id="checkbox"
					value="#{payeBean.heslb}" />
				<h:outputLabel for="checkbox" value="Are you HESLB beneficiary?" />

			</div>
			<h:commandButton class="w-100 btn btn-lg btn-primary" value="Submit"
				action="#{payeBean.searchIncomeClass()}">
				<f:ajax execute="@form" render=":paye"></f:ajax>
			</h:commandButton>
		</h:form>
		<section jsf:id="paye" class="my-5">
			<ui:fragment rendered="#{!payeBean.paye.displayTable}">
				<span class="text-muted"> Your income break down will be
					displayed here! </span>
			</ui:fragment>
			<ui:fragment rendered="#{payeBean.paye.displayTable}">
				<h:dataTable value="#{payeBean.paye}" var="paye">
					<h:column>
						<f:facet name="header">Income class</f:facet>
						<h:outputText value="#{paye.incomeClass}" />
					</h:column>

					<h:column>
						<f:facet name="header">Your gross salary</f:facet>
						<h:outputText value="#{paye.salary}">
							<f:convertNumber type="currency" currencySymbol=""
								minFractionDigits="2" maxFractionDigits="2" />
						</h:outputText>
					</h:column>
					<h:column>
						<f:facet name="header">Nssf or Psssf</f:facet>
						<h:outputText value="#{paye.socialSecurityFund}">
							<f:convertNumber type="currency" currencySymbol=""
								minFractionDigits="2" maxFractionDigits="2" />
						</h:outputText>
					</h:column>
					<h:column>
						<f:facet name="header">Amount taxable</f:facet>
						<h:outputText value="#{paye.taxableAmount}">
							<f:convertNumber type="currency" currencySymbol=""
								minFractionDigits="2" maxFractionDigits="2" />
						</h:outputText>
					</h:column>
					<h:column>
						<f:facet name="header">Pay as you earn (PAYE)</f:facet>
						<h:outputText value="#{paye.paye}">
							<f:convertNumber type="currency" currencySymbol=""
								minFractionDigits="2" maxFractionDigits="2" />
						</h:outputText>
					</h:column>
					<h:column>
						<f:facet name="header">HESLB repayment</f:facet>
						<h:outputText value="#{paye.heslbDeduction}">
							<f:convertNumber type="currency" currencySymbol=""
								minFractionDigits="2" maxFractionDigits="2" />
						</h:outputText>
					</h:column>
					<h:column>
						<f:facet name="header">Take home</f:facet>
						<h:outputText value="#{paye.takeHome}">
							<f:convertNumber type="currency" currencySymbol=""
								minFractionDigits="2" maxFractionDigits="2" />
						</h:outputText>
					</h:column>
					<!-- <h:column>#{paye.totalDeduction}</h:column> -->
				</h:dataTable>
			</ui:fragment>
		</section>
	</ui:define>
</ui:composition>